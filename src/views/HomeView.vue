<template>
  <div class="p-6">
    <h1 class="text-2xl font-bold">ğŸ”¥ Roast Wall</h1>
    <RoastForm @addRoast="addRoast" />
    <RoastList :roasts="roasts" />
  </div>
</template>

<script setup>
import { onMounted, computed } from 'vue';  // å¼•å…¥ computed
import { useRoastStore } from '@/store/roastStore';  // å¼•å…¥ Pinia store
import RoastForm from '@/components/RoastForm.vue';
import RoastList from '@/components/RoastList.vue';

const roastStore = useRoastStore();  // ä½¿ç”¨ store

// ä½¿ç”¨ computed ä¾†è™•ç† roastsï¼Œé€™æ¨£å°±èƒ½ç¢ºä¿è¦–åœ–æ›´æ–°
const roasts = computed(() => roastStore.roasts);  // å¾ store ç²å– roasts

onMounted(() => {
  console.log("Fetching roasts...");
  roastStore.fetchRoasts();  // åœ¨çµ„ä»¶åŠ è¼‰æ™‚æ‹‰å–æ•¸æ“š
});

const addRoast = (newRoast) => {
  roastStore.addRoast(newRoast);  // ä½¿ç”¨ store çš„æ–¹æ³•æ–°å¢åæ§½
};
</script>
